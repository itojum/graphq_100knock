## 41: 不正なレビューをブロックせよ！

### お題
レビュー作成（`createReview`）にバリデーションを追加し、不正なデータが登録されないようにしてください。

### 要件
- `rating` が **1〜5** の範囲外であればエラーを返すようにしてください。
- `content` が **空文字または5文字未満** の場合も同様にエラーを返すようにしてください。
- バリデーションエラーは `GraphQLError` を使って、クライアントに理由がわかるようなメッセージで返してください。

### ヒント
- `throw new GraphQLError("エラーメッセージ")` で返せます。
- 複数条件を丁寧に処理して、メッセージを使い分けると親切です。
- クライアント側でバリデーションしていても、サーバー側のチェックは必須です！

## 42: 一人のユーザーは同じ商品に何度もレビューできるのか？

### お題  
一人のユーザーが、同じ商品に複数回レビューできてしまう問題に対応してください。

### 要件
- `createReview` ミューテーションにロジックを追加し、**同じユーザーが同じ商品に2回以上レビューを投稿できない**ようにしてください。
- 二重投稿が試みられた場合は、`GraphQLError` を投げて適切なエラーメッセージを返してください。
- 他のユーザーが同じ商品にレビューするのはOKです。

### ヒント
- `reviews` の中から `productId` と `userId` の両方が一致するデータが存在しないかチェックしましょう。
- エラーメッセージ例：「このユーザーはすでにこの商品にレビューを投稿しています」

## 43: お気に入り商品機能を追加しよう

### お題
ユーザーが商品をお気に入り登録できる機能を追加してください。

### 要件
- 新しい `Favorite` 型を作成し、ユーザーと商品の関連を表現してください
- `User` 型に `favoriteProducts: [Product!]!` フィールドを追加してください
- `Product` 型に `favoritedBy: [User!]!` フィールドを追加してください
- お気に入り登録するための `addFavorite(userId: ID!, productId: ID!): Favorite!` ミューテーションを追加してください
- お気に入り解除するための `removeFavorite(userId: ID!, productId: ID!): Boolean!` ミューテーションを追加してください
- ユーザーのお気に入り商品一覧を取得できるようにしてください

### ヒント
- 中間テーブル的なアプローチで `Favorite` 型を使い、`userId` と `productId` を持たせると良いでしょう
- お気に入り追加時に、すでに登録済みの場合はエラーを返すようにしましょう
- お気に入り解除時に、該当するお気に入りがない場合は `false` を返すようにしましょう

## 44: ユーザーのお気に入り商品件数を取得しよう

### お題
ユーザーごとのお気に入り商品数を取得できるようにしてください。

### 要件
- `User` 型に `favoriteProductCount: Int!` フィールドを追加してください
- `users` クエリの結果に、各ユーザーのお気に入り商品数が含まれるようにしてください
- お気に入り商品がない場合は `0` が返るようにしてください

### ヒント
- 必ずしも専用のカウントフィールドを持つ必要はなく、`favoriteProducts` の長さを返す実装でも構いません
- ユーザーリゾルバに `favoriteProductCount` を実装して計算する形にすると良いでしょう
